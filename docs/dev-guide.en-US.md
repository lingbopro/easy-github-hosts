# Easy GitHub Hosts - Development Guide

This document provides a detailed guide for developers who wish to understand, modify, or contribute to the Easy GitHub Hosts project.

## Table of Contents

- [Easy GitHub Hosts - Development Guide](#easy-github-hosts---development-guide)
  - [Table of Contents](#table-of-contents)
  - [Project Structure](#project-structure)
  - [Code Overview](#code-overview)
    - [ipFetcher.js](#ipfetcherjs)
    - [updateHosts.js](#updatehostsjs)
    - [restoreHosts.js](#restorehostsjs)
    - [main.js](#mainjs)
  - [Contributing](#contributing)

## Project Structure

The project has the following structure:

easy-github-hosts/  
├── .github/  
│   ├── ISSUE_TEMPLATE/  
│   ├── bug_report.md  
│   └── feature_request.md  
├── docs/  
│   ├── CONTRIBUTING.en-US.md  
│   └── dev-guide.en-US.md  
│   └── dev-guide.zh-CN.md  
├── files/  
│   ├── backup/  
│   └── cache/
├── src/  
│   ├── main.js  
│   ├── ipFetcher.js  
│   ├── updateHosts.js  
│   ├── restoreHosts.js  
│   ├── package.json  
│   ├── package-lock.json  
├── LICENSE  
├── README.md  

- `.github/`: Files about GitHub.
  - `ISSUE_TEMPLATE/`: Contains the issue template files.
    - `bug_report.md`: Yes! It for bug report issue.
    - `feature_request.md`: Yes! It for feature request issue.
- `docs/`: Contains the documentation files.
  <!-- - `README.md`: Provides general information and usage instructions. -->
  - `dev-guide.en-US.md`: This development guide (English).
  - `dev-guide.zh-CN.md`: Development guide (Chinese).
- `files/`: Contains the files generated by this program.
  - `backup/`: Contains the backup of the HOSTS file.
  - `cache/`: Contains the IP cache.
- `src/`: Main program files.
  - `ipFetcher.js`: Contains functions to fetch the IP addresses for GitHub-related domains.
  - `main.js`: The main entry point for the program.
  - `package.json`: Manages project dependencies and scripts.
  - `restoreHosts.js`: Contains functions to restore the original `hosts` file.
  - `updateHosts.js`: Contains functions to update the `hosts` file with new IP addresses.

## Code Overview

### ipFetcher.js

This file contains the logic to fetch IP addresses for a list of GitHub-related domains using fetch:  

`getIP(host)`: Fetches the IP address for a given host.  
`getIPs(cache)`: Fetches IP addresses for all predefined GitHub-related domains. If `cache` parameter is true, it will also cache all IP addresses.  
`cacheIPs(IPs)`: Caches given IP addresses to a file.  
`readCache()`: Reads cached IP addresses.  

### updateHosts.js  

This file contains the logic to update the hosts file:  

`checkIPv4(IP)`: Checks if a string is a valid IPv4 address.  
`parseHostsRecord(record)`: Parses a single record from the hosts file.  
`createBackup(hostsPath)`: Creates a backup of the hosts file.  
`updateHosts()`: Main function to update the hosts file.  
`getLines(content)`: Gets the lines of `content`.  
`findByItemProperty(array, property, find)`: Finds first item that property `property` equals to `find` in `array`.  

### restoreHosts.js  

This file contains the logic to restore the original hosts file from a backup:  

`restoreHosts()`: Main function to restore the hosts file from a backup.  

### main.js  

This file serves as the entry point for the program. It imports and runs the updateHosts function from updateHosts.js.

## Contributing

Contributions are welcome! Please follow these guidelines:  

Fork the repository.  
Create a new branch for your feature or bug fix.  
Write code for your changes.  
Format your code with [Prettier](https://prettier.io).  
Commit your changes with a descriptive message.  
Push your branch to your fork.  
Submit a pull request to the main repository **(dev branch)**.  
